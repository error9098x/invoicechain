<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- InvoiceChain - Blockchain Invoice Financing Platform -->
    <title>InvoiceChain</title>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
          radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
        pointer-events: none;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
      }
      ::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
      }
      ::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 5px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.5);
      }

      /* Main Container */
      .signup-container {
        max-width: 580px;
        width: 100%;
        position: relative;
        z-index: 1;
      }

      /* Card Styles */
      .signup-card {
        background: #ffffff;
        border-radius: 24px;
        padding: 60px 50px;
        box-shadow: 
          0 30px 90px rgba(0, 0, 0, 0.25),
          0 0 1px rgba(0, 0, 0, 0.3);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(10px);
      }

      .signup-card:hover {
        transform: translateY(-8px);
        box-shadow: 
          0 40px 110px rgba(0, 0, 0, 0.3),
          0 0 1px rgba(0, 0, 0, 0.3);
      }

      /* Card Header */
      .card-header {
        text-align: center;
        margin-bottom: 45px;
        padding-bottom: 20px;
        border-bottom: 2px solid #f0f0f0;
      }

      .card-icon {
        font-size: 64px;
        margin-bottom: 20px;
        display: block;
        line-height: 1;
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
      }

      .card-title {
        font-size: 32px;
        font-weight: 800;
        color: #1a1a2e;
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 10px;
        line-height: 1.2;
      }

      .card-subtitle {
        font-size: 14px;
        font-weight: 500;
        color: #6b7280;
        letter-spacing: 0.5px;
        margin-top: 8px;
      }

      /* Form Styles */
      form {
        width: 100%;
      }

      .form-group {
        margin-bottom: 28px;
        width: 100%;
      }

      label {
        display: block;
        margin-bottom: 12px;
        font-weight: 700;
        font-size: 13px;
        color: #374151;
        text-transform: uppercase;
        letter-spacing: 1px;
        line-height: 1.5;
      }

      input[type="email"],
      input[type="password"],
      input[type="text"] {
        width: 100%;
        padding: 18px 20px;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        background: #f9fafb;
        color: #1f2937;
        font-size: 16px;
        font-weight: 500;
        transition: all 0.3s ease;
        font-family: 'Inter', sans-serif;
        line-height: 1.5;
      }

      input[type="email"]:focus,
      input[type="password"]:focus,
      input[type="text"]:focus {
        outline: none;
        border-color: #a78bfa;
        background: #ffffff;
        box-shadow: 
          0 0 0 4px rgba(167, 139, 250, 0.15),
          0 4px 12px rgba(167, 139, 250, 0.1);
        transform: translateY(-2px);
      }

      input::placeholder {
        color: #9ca3af;
        font-weight: 400;
      }

      /* Button Styles */
      .btn-signup {
        width: 100%;
        padding: 20px 32px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #ffffff;
        border: none;
        border-radius: 14px;
        font-size: 16px;
        font-weight: 800;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-top: 20px;
        box-shadow: 
          0 10px 30px rgba(102, 126, 234, 0.4),
          0 0 1px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
        line-height: 1.5;
      }

      .btn-signup::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s;
      }

      .btn-signup:hover::before {
        left: 100%;
      }

      .btn-signup:hover {
        transform: translateY(-4px);
        box-shadow: 
          0 15px 40px rgba(102, 126, 234, 0.5),
          0 0 1px rgba(0, 0, 0, 0.1);
      }

      .btn-signup:active {
        transform: translateY(-2px);
        box-shadow: 
          0 8px 25px rgba(102, 126, 234, 0.4),
          0 0 1px rgba(0, 0, 0, 0.1);
      }

      /* Output Styles */
      #output {
        margin-top: 28px;
        padding: 18px 22px;
        background: #fef3c7;
        border-left: 5px solid #f59e0b;
        border-radius: 10px;
        color: #92400e;
        font-weight: 600;
        font-size: 15px;
        min-height: 60px;
        display: none;
        line-height: 1.6;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }

      #output.show {
        display: block;
        animation: slideIn 0.3s ease;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      #output.success {
        background: #d1fae5;
        border-color: #10b981;
        color: #065f46;
      }

      #output.error {
        background: #fee2e2;
        border-color: #ef4444;
        color: #991b1b;
      }

      /* Page visibility */
      .page {
        display: none;
      }

      .page.active {
        display: block;
      }

      /* Dashboard Grid */
      .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        max-width: 1000px;
        width: 100%;
      }

      .portal-card {
        background: #ffffff;
        border-radius: 20px;
        padding: 40px 30px;
        box-shadow: 
          0 20px 60px rgba(0, 0, 0, 0.2),
          0 0 1px rgba(0, 0, 0, 0.3);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        text-align: center;
      }

      .portal-card:hover {
        transform: translateY(-10px);
        box-shadow: 
          0 30px 80px rgba(0, 0, 0, 0.25),
          0 0 1px rgba(0, 0, 0, 0.3);
      }

      .portal-card .card-icon {
        font-size: 72px;
        margin-bottom: 20px;
        display: block;
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
      }

      .portal-card h3 {
        font-size: 22px;
        font-weight: 800;
        color: #1a1a2e;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        margin-bottom: 12px;
      }

      .portal-card p {
        font-size: 14px;
        color: #6b7280;
        font-weight: 500;
        line-height: 1.6;
      }

      .dashboard-title {
        text-align: center;
        margin-bottom: 50px;
      }

      .dashboard-title h1 {
        font-size: 42px;
        font-weight: 800;
        color: #ffffff;
        text-transform: uppercase;
        letter-spacing: 3px;
        margin-bottom: 15px;
        text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      }

      .dashboard-title p {
        font-size: 16px;
        color: rgba(255, 255, 255, 0.9);
        font-weight: 500;
      }

      /* Link Styles */
      .link-text {
        text-align: center;
        margin-top: 25px;
        font-size: 14px;
        color: #6b7280;
        font-weight: 500;
      }

      .link-text a {
        color: #764ba2;
        text-decoration: none;
        font-weight: 700;
        transition: color 0.3s ease;
      }

      .link-text a:hover {
        color: #667eea;
        text-decoration: underline;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        body {
          padding: 30px 15px;
        }

        .signup-container {
          max-width: 100%;
        }

        .signup-card {
          padding: 45px 35px;
          border-radius: 20px;
        }

        .card-icon {
          font-size: 52px;
        }

        .card-title {
          font-size: 26px;
          letter-spacing: 1.5px;
        }

        .card-subtitle {
          font-size: 13px;
        }

        input[type="email"],
        input[type="password"],
        input[type="text"] {
          padding: 16px 18px;
          font-size: 15px;
        }

        .btn-signup {
          padding: 18px 28px;
          font-size: 15px;
        }

        #output {
          font-size: 14px;
          padding: 16px 20px;
        }
      }

      @media (max-width: 480px) {
        .signup-card {
          padding: 35px 25px;
        }

        .card-title {
          font-size: 22px;
        }
      }
    </style>

    <link rel="stylesheet" href="/index.css" />
    <script>
      const CONTRACT_ABI = [
        {
          "inputs": [],
          "name": "message",
          "outputs": [
            {
              "internalType": "string",
              "name": "",
              "type": "string"
            }
          ],
          "stateMutability": "view",
          "type": "function"
        },
        {
          "inputs": [
            {
              "internalType": "string",
              "name": "_msg",
              "type": "string"
            }
          ],
          "name": "setMessage",
          "outputs": [],
          "stateMutability": "nonpayable",
          "type": "function"
        }
      ];
    </script>
  </head>

  <body>
    <div id="root"></div>

    <!-- Dashboard Page -->
    <div class="page active" id="dashboardPage">
      <div class="dashboard-title">
        <h1>üìä InvoiceChain Portal</h1>
        <p>Select your portal to access blockchain features</p>
      </div>
      <div class="dashboard-grid">
        <div class="portal-card" onclick="showPage('msmeLoginPage')">
          <span class="card-icon">üè¢</span>
          <h3>MSME Portal</h3>
          <p>For small and medium enterprises</p>
        </div>
        <div class="portal-card" onclick="showPage('bankLoginPage')">
          <span class="card-icon">üè¶</span>
          <h3>Bank / NBFC Portal</h3>
          <p>For financial institutions</p>
        </div>
        <div class="portal-card" onclick="showPage('buyerLoginPage')">
          <span class="card-icon">üõí</span>
          <h3>Buyer Portal</h3>
          <p>For corporate buyers</p>
        </div>
      </div>
    </div>

    <!-- MSME Login Page -->
    <div class="signup-container page" id="msmeLoginPage">
      <div class="signup-card">
        <div class="card-header">
          <div class="card-icon">üè¢</div>
          <h2 class="card-title">MSME Portal</h2>
          <p class="card-subtitle">Sign in to manage your invoices</p>
        </div>
        <form onsubmit="event.preventDefault(); handleLogin('msme');">
          <div class="form-group">
            <label for="msmeEmail">Email Address</label>
            <input 
              type="email" 
              id="msmeEmail" 
              placeholder="Enter your email address" 
              required
              autocomplete="email"
            >
          </div>
          <div class="form-group">
            <label for="msmePassword">Password</label>
            <input 
              type="password" 
              id="msmePassword" 
              placeholder="Enter your password" 
              required
              autocomplete="current-password"
            >
          </div>
          <button type="submit" class="btn-signup">
            üîê Sign In
          </button>
          <div class="link-text">
            <a href="#" onclick="event.preventDefault(); showPage('dashboardPage');">‚Üê Back to Dashboard</a>
          </div>
        </form>
      </div>
    </div>

    <!-- Bank/NBFC Login Page -->
    <div class="signup-container page" id="bankLoginPage">
      <div class="signup-card">
        <div class="card-header">
          <div class="card-icon">üè¶</div>
          <h2 class="card-title">Bank / NBFC Portal</h2>
          <p class="card-subtitle">Sign in to access blockchain features</p>
        </div>
        <form onsubmit="event.preventDefault(); handleLogin('bank');">
          <div class="form-group">
            <label for="bankEmail">Email Address</label>
            <input 
              type="email" 
              id="bankEmail" 
              placeholder="Enter your email address" 
              required
              autocomplete="email"
            >
          </div>
          <div class="form-group">
            <label for="bankPassword">Password</label>
            <input 
              type="password" 
              id="bankPassword" 
              placeholder="Enter your password" 
              required
              autocomplete="current-password"
            >
          </div>
          <button type="submit" class="btn-signup">
            üîê Sign In
          </button>
          <div class="link-text">
            <a href="#" onclick="event.preventDefault(); showPage('dashboardPage');">‚Üê Back to Dashboard</a>
          </div>
        </form>
      </div>
    </div>

    <!-- Buyer Login Page -->
    <div class="signup-container page" id="buyerLoginPage">
      <div class="signup-card">
        <div class="card-header">
          <div class="card-icon">üõí</div>
          <h2 class="card-title">Buyer Portal</h2>
          <p class="card-subtitle">Sign in to manage purchases</p>
        </div>
        <form onsubmit="event.preventDefault(); handleLogin('buyer');">
          <div class="form-group">
            <label for="buyerEmail">Email Address</label>
            <input 
              type="email" 
              id="buyerEmail" 
              placeholder="Enter your email address" 
              required
              autocomplete="email"
            >
          </div>
          <div class="form-group">
            <label for="buyerPassword">Password</label>
            <input 
              type="password" 
              id="buyerPassword" 
              placeholder="Enter your password" 
              required
              autocomplete="current-password"
            >
          </div>
          <button type="submit" class="btn-signup">
            üîê Sign In
          </button>
          <div class="link-text">
            <a href="#" onclick="event.preventDefault(); showPage('dashboardPage');">‚Üê Back to Dashboard</a>
          </div>
        </form>
      </div>
    </div>

    <!-- Contract Interaction Page (After Bank Login) -->
    <div class="signup-container page" id="contractPage">
      <div class="signup-card">
        <div class="card-header">
          <div class="card-icon">üîó</div>
          <h2 class="card-title">Contract Interaction</h2>
          <p class="card-subtitle">Test your blockchain smart contract</p>
        </div>
        <form onsubmit="event.preventDefault();">
          <div class="form-group">
            <label for="contractAddress">Contract Address</label>
            <input 
              type="text" 
              id="contractAddress" 
              placeholder="Enter contract address (0x...)" 
              value="PASTE_CONTRACT_ADDRESS_HERE"
              autocomplete="off"
            >
          </div>
          <button type="button" class="btn-signup" onclick="readMessage()">
            üì• Get Message
          </button>
          <div id="output"></div>
          <div class="link-text">
            <a href="#" onclick="event.preventDefault(); handleLogout();">‚Üê Logout</a>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

    <script>
      // Page navigation functions
      function showPage(pageId) {
        document.querySelectorAll('.page').forEach(page => {
          page.classList.remove('active');
        });
        document.getElementById(pageId).classList.add('active');
      }

      function handleLogin(portal) {
        let email, password;
        
        if (portal === 'msme') {
          email = document.getElementById('msmeEmail').value;
          password = document.getElementById('msmePassword').value;
        } else if (portal === 'bank') {
          email = document.getElementById('bankEmail').value;
          password = document.getElementById('bankPassword').value;
        } else if (portal === 'buyer') {
          email = document.getElementById('buyerEmail').value;
          password = document.getElementById('buyerPassword').value;
        }

        if (email && password) {
          // Only Bank/NBFC portal has access to contract interaction
          if (portal === 'bank') {
            showPage('contractPage');
          } else {
            // For MSME and Buyer, you can redirect to different pages
            alert(`Welcome to ${portal.toUpperCase()} Portal! (Feature coming soon)`);
          }
        }
      }

      function handleLogout() {
        // Clear forms
        document.getElementById('msmeEmail').value = '';
        document.getElementById('msmePassword').value = '';
        document.getElementById('bankEmail').value = '';
        document.getElementById('bankPassword').value = '';
        document.getElementById('buyerEmail').value = '';
        document.getElementById('buyerPassword').value = '';
        showPage('dashboardPage');
      }

      // Provider (demo)
      const provider = new ethers.providers.JsonRpcProvider();

      async function readMessage() {
        try {
          const contractAddress = document.getElementById("contractAddress").value;
          const outputEl = document.getElementById("output");
          
          // Show output element
          outputEl.classList.add("show");
          outputEl.classList.remove("success", "error");
          
          if (!contractAddress || contractAddress === "PASTE_CONTRACT_ADDRESS_HERE") {
            outputEl.innerText = "‚ö†Ô∏è Please enter a valid contract address";
            outputEl.classList.add("error");
            return;
          }

          outputEl.innerText = "‚è≥ Loading...";

          const contract = new ethers.Contract(contractAddress, CONTRACT_ABI, provider);
          const msg = await contract.message();
          
          outputEl.innerText = "‚úÖ Message: " + msg;
          outputEl.classList.add("success");
        } catch (error) {
          const outputEl = document.getElementById("output");
          outputEl.classList.add("show", "error");
          outputEl.innerText = "‚ùå Error: " + error.message;
        }
      }
    </script>

    <script type="module" src="/src/index.tsx"></script>
  </body>
</html>
